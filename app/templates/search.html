<html>
    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
        <link rel="stylesheet" href="/static/main.css">
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

        <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap/3/css/bootstrap.css" />
        <script type="text/javascript" src="//cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
        <script type="text/javascript" src="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js"></script>
        <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css" />

        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <script src="https://unpkg.com/scrollreveal/dist/scrollreveal.min.js"></script>
        <!-- <link rel="stylesheet" href="bower_components/aos/dist/aos.css" />
        <script src="bower_components/aos/dist/aos.js"></script> -->
        <script>
          // window.sr = ScrollReveal({ move: 1 });

          // // Add class to <html> if ScrollReveal is supported
          // // Note: this method is deprecated, and only works in version 3
          // if (sr.isSupported()) {
          //   document.documentElement.classList.add('sr');
          // }

        </script>
        <style>

          /* Ensure elements load hidden before ScrollReveal runs */
          /*.sr .videos { visibility: hidden; }*/
          /*.videos { visibility: hidden; }*/

        </style>
    </head>
    <body>

        <div class="jumbotron text-center">
        <form class="global-search">
            <h1 style="font-size: 55px; color: #E5E5E5; font-family: 'Arial Black'">
                Recommen
            </h1>
            <h1 style="font-size: 65px; font-weight: bold; color: #E62B1E; font-family: 'Arial Black'">TED</h1>

            <br><br>
            <span>
            <div class="form-group">
            {% if query %}
                <input id="input" type="text" name="search" class="form-control" value="{{query}}" style="color: #545454">
            {% else %}
                <input id="input" type="text" name="search" class="form-control" placeholder="What do you want to watch today?" style="color: #545454">
            {% endif %}
            </div>
            <div class="input-group-prepend ratingsDropDown">
              <select id="sort-item" class="custom-select" name="sortBy" >
              <option value="None" selected>Sort By</option>

                <option value="views" href="#">Views</option>
                <option value="Beautiful" href="#">Beautiful</option>
                <option value="Confusing" href="#">Confusing</option>
                <option value="Courageous" href="#">Courageous</option>
                <option value="Funny" href="#">Funny</option>
                <option value="Informative" href="#">Informative</option>
                <option value="Ingenious" href="#">Ingenious</option>
                <option value="Inspiring" href="#">Inspiring</option>
                <option value="Longwinded" href="#">Longwinded</option>
                <option value="Unconvincing" href="#">Unconvincing</option>
                <option value="Fascinating" href="#">Fascinating</option>
                <option value="Jawdropping" href="#">Jaw-dropping</option>
                <option value="Persuasive" href="#">Persuasive</option>
                <option value="OK" href="#">OK</option>
                <option value="Obnoxious" href="#">Obnoxious</option>
              </select>
            </div>
            <button type="submit" name="submit_btn" class="btn btn-info searchButton" value="submitted">
                Search
            </button>
            </span>
        </form>
        </div>
        <form class="form-inline global-search">

        <div class="container">
          <div class="center">
            <h1><span>{{output_message}}</span></h1>
            {% if data %}
          </div>
        </div>

            </form>
            <!-- <div class="container" data-aos="fade"> -->
            <!-- <div class="container videos" data-sr="move 0px"> -->
            <div class="container videos">
              <table class="table">
                <thead>
                  <tr>
                    <th class="col-sm-3"><h2 style="font-weight: bold; color: #333">Our Recommendations</h2></th>
                    <th class="col-sm-1"><h2 style="font-weight: bold; color: #333; margin-left: 60px">User Ratings</h2></th>
                  </tr>
                </thead>
                <tbody>
                {% for t in topics %}
                 <button class="button" style="vertical-align:middle"><span>{{t}}</span></button>
                {% endfor %}

                {% for talk in data %}
                    <tr>
                        <td>
                        <a href="{{ talk.url }}">
                          <h1 style="font-size: 24px; margin-top: 50px; margin-bottom: 3px">{{ talk.title }}</h1>
                        </a>
                        {% if talk['type'] == 'cluster' %}
                          <p style="font-style: italic;"> <span class="clusterLab label label-warning">Explore</span>{{talk.speaker}}</p>
                        {% endif %}
                        {% if talk['type'] != 'cluster' %}
                          <p style="font-style: italic;">{{talk.speaker}}</p>
                        {% endif %}
                        <p style="font-size: 13px">{{ talk.description[0] }}</p>
                        <p style="color:#cf4141;"><strong><script>document.write({{talk.views}}..toLocaleString());</script></strong> views</p>
                        {% for tag in talk.tags %}
                            <span class="talks label label-default">{{tag}}</span>
                        {% endfor %}
                        </td>
                        <td>
                        <div id="{{ loop.index }}"></div>
                            <script>
                                var lst = [{{talk.Beautiful}},
                                      {{talk.Confusing}},
                                      {{talk.Courageous}},
                                      {{talk.Funny}},
                                      {{talk.Informative}},
                                      {{talk.Ingenious}},
                                      {{talk.Inspiring}},
                                      {{talk.Longwinded}},
                                      {{talk.Unconvincing}},
                                      {{talk.Fascinating}},
                                      {{talk.Jawdropping}},
                                      {{talk.Persuasive}},
                                      {{talk.OK}},
                                      {{talk.Obnoxious}}
                                     ];
                                data = [{
                                  type: 'scatterpolar',
                                  name:'User Ratings',
                                  r: lst,
                                  theta: ['Beautiful',
                                          '       Confusing',
                                          '      Courageous',
                                          'Funny',
                                          'Informative',
                                          'Ingenious   ',
                                          'Inspiring     ',
                                          'Longwinded',
                                          'Unconvincing            ',
                                          'Fascinating    ',
                                          'Jaw-dropping',
                                          'Persuasive',
                                          'OK',
                                          '        Obnoxious'
                                          ],
                                  fill: 'toself',
                                  line: {color: 'rgb(207,65,65)'},
                                  hoverlabel: {
                                    font: {
                                        family: "Arial",
                                        color: '#FFFFFF'
                                    },
                                    bordercolor: 'rgb(51,51,51)',
                                    bgcolor: 'rgb(51,51,51)'
                                  },

                                }]

                                layout = {
                                  width: 350,
                                  height: 350,
                                  margin: {
                                    l: 70,
                                    r: 55,
                                    b: 0,
                                    t: 0,
                                    pad: 0
                                    },
                                  polar: {
                                    bgcolor: 'rgb(242, 242, 242)',
                                    radialaxis: {
                                      visible: true,
                                      range: [0, Math.max(lst)],
                                      tickfont: {size: 8},
                                    },
                                    angularaxis: {
                                      tickfont: {size: 10},
                                      dtick: 1
                                    }
                                  },
                                  showlegend: false
                                }

                                Plotly.plot("{{ loop.index }}", data, layout, {displayModeBar: false})
                            </script>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
              </table>
            </div>
        {% endif %}

    </body>
    <div class="top_right">
      <!-- <p>Project Name: {{ name }}</p> -->
      <p>Student Names: {{ netid }}</p>
    </div>

    <!-- script type="text/javascript">
      // window.sr = ScrollReveal({ move: 0 });
      sr.reveal('.videos', { opacity: 0, duration: 500 });
      // AOS.init();
    </script> -->

<!--   <script>
    window.onload = function() {
    var selItem = sessionStorage.getItem("SelItem");
    $('#sort-item').val(selItem);
    }
    $('#sort-item').change(function() {
        var selVal = $(this).val();
        sessionStorage.setItem("SelItem", selVal);
    });
  </script> -->

</html>
